#!/usr/bin/env bash
# A Bash script that installs Nginx and configures it to return "Holberton School"
# when queried at the root (/) with a GET request using curl.

# Update the package list
apt-get update

# Install Nginx without prompting for confirmation (-y flag)
apt-get install -y nginx

# Create the web root directory (if it doesn't exist)
mkdir -p /var/www/html

# Create the index.html file with "Holberton School" content
echo "Holberton School for the win!" > /var/www/html/index.html

# Modify the default Nginx server configuration
printf %s "server {
    listen 80 default_server;
    listen [::]:80 default_server;
    root /var/www/html;
    index index.html;
    server_name _;
    
    location / {
        try_files \$uri \$uri/ =404;
    }
}
" > /etc/nginx/sites-available/default

# Restart Nginx to apply changes (without using systemctl)
service nginx reload
service nginx restart

# Verify that Nginx is up and running on port 80
curl -s localhost
